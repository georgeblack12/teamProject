<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Calculate ice cream flavor sales</title>
		<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
		<!-- import echarts.js -->
		<script src = "https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>
		
	</head>
	<body>
		<!-- Prepare a DOM with size (width and height) for Ecarts -->
		<div id="main" style="width: 600px;height:400px;"></div>
		<script type="text/javascript">
			$(function() {
				$.ajax({
					type: "GET",
					url: "http://localhost:8080/tj/getSalesBytaste",
					data: {},
					dataType: "json",
					success: function(data) {
						console.log("data:"+data);
						var nameArr = [];
						var numArr = [];
						for(var i=0;i<data.length;i++){
							nameArr.push(data[i].name);
							numArr.push(data[i].num);
						}
						
						// Based on the prepared DOM, initialize the Ecarts instance
						var myChart = echarts.init(document.getElementById('main'));
						
						// Specify the configuration items and data for the chart
						var option = {
							title: {
								text: ''
							},
							tooltip: {},
							legend: {
								data: ['冰淇淋口味销量']
							},
							xAxis: {
								data: nameArr
							},
							yAxis: {
								minInterval: 1, //Set to 1 to ensure that the axis division scale is displayed as an integer.
							},
							series: [{
								name: '冰淇淋口味销量',
								type: 'line',
								data: numArr
							}]
						};
						
						// Displays the chart using the configuration item and data you just specified.
						myChart.setOption(option);
					}
				});
			});


			
		</script>
	</body>
</html>
